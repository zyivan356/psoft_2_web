<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PSoft 2</title>
    <link rel="stylesheet" href="styles.css">
    <script src="/eel.js"></script>
</head>
<body>
    <div class="container">
        <h1>PSoft 2</h1>

        <!-- Вкладки -->
        <div class="tabs">
           <button class="tab-button" onclick="openTab(event, 'check')">Проверка</button>
            <button class="tab-button" onclick="openTab(event, 'encode-decode')">Кодирование/Декодирование</button>
            <button class="tab-button" onclick="openTab(event, 'setup-card')">Создание настроечной карты</button>
            <button class="tab-button" onclick="openTab(event, 'settings')">Настройки</button>
             <button class="tab-button active" onclick="openTab(event, 'dump')">Дамп</button>
        </div>

        <!-- Вкладка дампа -->
        <div id="dump" class="tab-content active">
            <div class="form-group">
                <label for="reader-dump">Считыватель:</label>
                <select id="reader-dump"></select>
                <button onclick="updateReaders('dump')">Обновить</button>
            </div>
            <div class="button-group">
                <button onclick="dumpCard()">Дамп</button>
                <button onclick="clearAllBlocks()" class="danger">Очистить все блоки</button>
                <button onclick="clearOutput('dump-output')">Очистить вывод</button>
            </div>
            <div id="dump-output" class="output"></div>
        </div>

        <!-- Вкладка кодирования/декодирования -->
        <div id="encode-decode" class="tab-content">
            <div class="form-group">
                <label for="reader-encode">Считыватель:</label>
                <select id="reader-encode"></select>
                <button onclick="updateReaders('encode')">Обновить</button>
            </div>
            <div class="button-group">
                <button onclick="encode()">Кодировать</button>
                <button onclick="decode()">Декодировать</button>
            </div>
        </div>

        <!-- Вкладка создания настроечной карты -->
        <div id="setup-card" class="tab-content">
            <div class="form-group">
                <label for="reader-setup">Считыватель:</label>
                <select id="reader-setup"></select>
                <button onclick="updateReaders('setup')">Обновить</button>
            </div>

            <div class="form-group">
                <label for="lock-no">Номер замка:</label>
                <input type="number" id="lock-no" value="1" min="1">
            </div>

            <div class="form-group">
                <label for="wait-time">Время ожидания:</label>
                <input type="number" id="wait-time" value="10" min="0">
            </div>

            <div class="form-group">
                <label for="sound-mode">Режим звука:</label>
                <select id="sound-mode">
                    <option value="0">0 - Без звука</option>
                    <option value="1">1 - Звук 1</option>
                    <option value="2">2 - Звук 2</option>
                    <option value="3">3 - Оба звука</option>
                </select>
            </div>

            <div class="form-group">
                <label for="alarm-mode">Режим тревоги:</label>
                <select id="alarm-mode">
                    <option value="0">0 - Нет</option>
                    <option value="1">1 - Тревога 1</option>
                    <option value="2">2 - Тревога 2</option>
                </select>
            </div>

            <div class="form-group">
                <label for="lock-mode">Режим замка:</label>
                <select id="lock-mode">
                    <option value="0">0 - Нормальный</option>
                    <option value="1">1 - Специальный</option>
                </select>
            </div>

            <div class="form-group">
                <label>
                    <input type="checkbox" id="cb-auto-1"> Автоинкремент номера замка
                </label>
            </div>

            <div class="button-group">
                <button onclick="writeSetupCard()" class="success">Записать настроечную карту</button>
                <button onclick="clearSetupBlocks()" class="danger">Очистить блоки 60 и 61</button>
            </div>
        </div>

        <!-- Вкладка проверки -->
        <div id="check" class="tab-content">
            <div class="form-group">
                <label for="reader-check">Считыватель:</label>
                <select id="reader-check"></select>
                <button onclick="updateReaders('check')">Обновить</button>
            </div>
            <div class="button-group">
                <button onclick="checkLockNumber()" class="info">Проверить номер замка</button>
            </div>
        </div>

        <!-- Вкладка настроек -->
        <div id="settings" class="tab-content">
            <h2>Настройки по умолчанию</h2>

            <div class="form-group">
                <label for="settings-key-a">Ключ A по умолчанию:</label>
                <input type="text" id="settings-key-a" maxlength="12">
            </div>

            <div class="form-group">
                <label for="settings-key-b">Ключ B по умолчанию:</label>
                <input type="text" id="settings-key-b" maxlength="12">
            </div>

            <div class="form-group">
                <label for="settings-access-bits">Биты доступа по умолчанию:</label>
                <input type="text" id="settings-access-bits" maxlength="8">
            </div>

            <div class="form-group">
                <label for="settings-block">Блок по умолчанию:</label>
                <select id="settings-block">
                    <option value="62">62</option>
                    <option value="33">33</option>
                </select>
            </div>

            <div class="button-group">
                <button onclick="saveSettings()">Сохранить настройки</button>
                <button onclick="resetSettings()">Сбросить настройки</button>
            </div>

            <div id="settings-status"></div>
        </div>
    </div>

    <!-- Диалоговое окно статуса -->
    <div id="status-dialog"></div>

    <script src="script.js"></script>
</body>
</html>